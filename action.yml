name: Github Action Test Risk Analysis
description: "Example Action built with Probot Github Action Test Risk Analysis"
branding:
  icon: "gift"
  color: orange
inputs:
  terraform_version:
    description: "Terraform version, defaults to install latest"
    required: false
    default: "latest"
  terraform_host:
    description: "The hostname of a Terraform Cloud/Enterprise instance to place within the credentials block of the Terraform CLI configuration file. Defaults to `app.terraform.io`."
    default: "app.terraform.io"
    required: false
  terraform_token:
    description: "The API token for a Terraform Cloud/Enterprise instance to place within the credentials block of the Terraform CLI configuration file."
    default: ""
    required: false
  working_directory:
    default: "."
    required: false
    description: "Github actions can't inherit working-directory. Set it here."
  mode:
    default: "plan"
    required: false
    description: "Plan or Apply mode. If plan, will update github job summary with results. If apply, will run on a tag and auto generate a release with results as the notes."
  github_token:
    default: "."
    required: false
    description: "For applies, needed to update the releases after tagging"
runs:
  using: "docker"
  image: "Dockerfile"
  env:
    TF_VERSION: ${{ inputs.terraform_version }}
    TF_HOST: ${{ inputs.terraform_host }}
    TF_TOKEN: ${{ inputs.terraform_token }}
    WORKING_DIRECTORY: ${{ inputs.working_directory }}
    ACTION_MODE: ${{ inputs.mode }}
    GITHUB_TOKEN: ${{ inputs.github_token }}